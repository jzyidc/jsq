import{_ as Q}from"./_plugin-vue_export-helper-e4601500.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                     */import{r as h,a0 as D,o as A,c as p,d as u,i as e,w as t,E as V,ap as G,as as H,g as m,j as E,b0 as J,l as i,Q as K,bv as W,at as X,k as Z,B as d,f as ee,p as ae,q as te,a3 as le,a4 as oe,au as ne,av as se,b3 as re,a2 as de,aw as ie,t as pe,ax as ue,ay as _e,b4 as ce,b5 as me,aB as fe}from"./index-53bb2135.js";import{c as ge}from"./finance-96de9528.js";const be={class:"orders-container"},ve={class:"card-header"},ye={class:"header-actions"},he={class:"search-area"},xe={class:"table-container"},ke={key:0,class:"amount income"},Ee={key:1,class:"amount expenditure"},Fe={key:2,class:"text-muted"},ze={class:"amount balance"},Ce={key:0,class:"order-detail"},De={key:0,class:"amount income"},Ve={key:1,class:"amount expenditure"},we={key:2,class:"text-muted"},Ne={class:"amount balance"},Re={__name:"Orders",setup(Me){const x=h(!1),v=h(!1),r=h(null),o=D({orderNumber:"",type:"",dateRange:null}),s=D({page:1,size:20,total:0}),F=h([]),z=n=>({充值:"success",购买:"primary",续费:"warning",赠送:"info",其他:"info"})[n]||"info",f=async()=>{x.value=!0;try{const n={page:s.page,pageSize:s.size};o.orderNumber&&(n.orderNumber=o.orderNumber),o.type&&(n.type=o.type),o.dateRange&&o.dateRange.length===2&&(n.startDate=o.dateRange[0],n.endDate=o.dateRange[1]);const a=await ge(n);a.Code===1e3?(F.value=a.List||[],s.total=a.RowCount||0,s.page=a.NowPage||1,s.size=a.PageSize||20):V.error(a.Msg||"获取订单数据失败")}catch(n){console.error("获取订单数据失败:",n),V.error("获取订单数据失败")}finally{x.value=!1}},w=()=>{s.page=1,f()},N=()=>{o.orderNumber="",o.type="",o.dateRange=null,s.page=1,f()},R=()=>{f()},M=n=>{s.size=n,s.page=1,f()},S=n=>{s.page=n,f()},Y=n=>{r.value=n,v.value=!0};return A(()=>{f()}),(n,a)=>{const k=ae,b=te,B=le,y=oe,g=ne,O=se,T=re,I=de,_=ie,C=pe,U=ue,P=_e,j=G,c=ce,L=me,$=H,q=fe;return p(),u("div",be,[e(j,{class:"page-card"},{header:t(()=>[m("div",ve,[a[8]||(a[8]=m("span",null,"订单列表",-1)),m("div",ye,[e(b,{type:"primary",onClick:R},{default:t(()=>[e(k,null,{default:t(()=>[e(E(J))]),_:1}),a[7]||(a[7]=i(" 刷新 "))]),_:1,__:[7]})])])]),default:t(()=>[m("div",he,[e(I,{model:o,inline:""},{default:t(()=>[e(y,{label:"订单号"},{default:t(()=>[e(B,{modelValue:o.orderNumber,"onUpdate:modelValue":a[0]||(a[0]=l=>o.orderNumber=l),placeholder:"请输入订单号",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(y,{label:"订单类型"},{default:t(()=>[e(O,{modelValue:o.type,"onUpdate:modelValue":a[1]||(a[1]=l=>o.type=l),placeholder:"请选择订单类型",clearable:"",style:{width:"150px"}},{default:t(()=>[e(g,{label:"全部",value:""}),e(g,{label:"购买",value:"购买"}),e(g,{label:"续费",value:"续费"}),e(g,{label:"充值",value:"充值"}),e(g,{label:"赠送",value:"赠送"}),e(g,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"时间范围"},{default:t(()=>[e(T,{modelValue:o.dateRange,"onUpdate:modelValue":a[2]||(a[2]=l=>o.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(b,{type:"primary",onClick:w},{default:t(()=>[e(k,null,{default:t(()=>[e(E(K))]),_:1}),a[9]||(a[9]=i(" 搜索 "))]),_:1,__:[9]}),e(b,{onClick:N},{default:t(()=>[e(k,null,{default:t(()=>[e(E(W))]),_:1}),a[10]||(a[10]=i(" 重置 "))]),_:1,__:[10]})]),_:1})]),_:1},8,["model"])]),m("div",xe,[X((p(),Z(U,{data:F.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(_,{prop:"order_number",label:"订单号",width:"200"}),e(_,{prop:"type",label:"订单类型",width:"120"},{default:t(({row:l})=>[e(C,{type:z(l.type),size:"small"},{default:t(()=>[i(d(l.type),1)]),_:2},1032,["type"])]),_:1}),e(_,{label:"金额",width:"120"},{default:t(({row:l})=>[parseFloat(l.amount)>0?(p(),u("span",ke," +¥"+d(parseFloat(l.amount).toFixed(2)),1)):parseFloat(l.amount)<0?(p(),u("span",Ee," ¥"+d(parseFloat(l.amount).toFixed(2)),1)):(p(),u("span",Fe,"¥0.00"))]),_:1}),e(_,{prop:"balance",label:"余额",width:"120"},{default:t(({row:l})=>[m("span",ze,"¥"+d(parseFloat(l.balance).toFixed(2)),1)]),_:1}),e(_,{prop:"time",label:"时间",width:"180"}),e(_,{prop:"describe",label:"描述","min-width":"200"}),e(_,{label:"操作",width:"120",fixed:"right"},{default:t(({row:l})=>[e(b,{type:"primary",size:"small",onClick:Se=>Y(l)},{default:t(()=>a[11]||(a[11]=[i(" 查看详情 ")])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,x.value]]),e(P,{"current-page":s.page,"onUpdate:currentPage":a[3]||(a[3]=l=>s.page=l),"page-size":s.size,"onUpdate:pageSize":a[4]||(a[4]=l=>s.size=l),"page-sizes":[10,20,50,100],total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:M,onCurrentChange:S,class:"pagination"},null,8,["current-page","page-size","total"])])]),_:1}),e($,{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=l=>v.value=l),title:"订单详情",width:"600px"},{footer:t(()=>[e(b,{onClick:a[5]||(a[5]=l=>v.value=!1)},{default:t(()=>a[12]||(a[12]=[i("关闭")])),_:1,__:[12]})]),default:t(()=>[r.value?(p(),u("div",Ce,[e(L,{column:2,border:""},{default:t(()=>[e(c,{label:"订单ID"},{default:t(()=>[i(d(r.value.id),1)]),_:1}),e(c,{label:"订单号"},{default:t(()=>[i(d(r.value.order_number),1)]),_:1}),e(c,{label:"订单类型"},{default:t(()=>[e(C,{type:z(r.value.type),size:"small"},{default:t(()=>[i(d(r.value.type),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"金额"},{default:t(()=>[parseFloat(r.value.amount)>0?(p(),u("span",De," +¥"+d(parseFloat(r.value.amount).toFixed(2)),1)):parseFloat(r.value.amount)<0?(p(),u("span",Ve," ¥"+d(parseFloat(r.value.amount).toFixed(2)),1)):(p(),u("span",we,"¥0.00"))]),_:1}),e(c,{label:"余额"},{default:t(()=>[m("span",Ne,"¥"+d(parseFloat(r.value.balance).toFixed(2)),1)]),_:1}),e(c,{label:"时间"},{default:t(()=>[i(d(r.value.time),1)]),_:1}),e(c,{label:"描述",span:2},{default:t(()=>[i(d(r.value.describe),1)]),_:1})]),_:1})])):ee("",!0)]),_:1},8,["modelValue"])])}}},He=Q(Re,[["__scopeId","data-v-7726b56f"]]);export{He as default};
