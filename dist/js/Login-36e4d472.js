import{_ as L}from"./_plugin-vue_export-helper-e4601500.js";/* empty css                     *//* empty css                *//* empty css                    *//* empty css                 */import{a as C,_ as E,u as $,r as B,$ as F,a0 as N,c as p,d as R,g as n,B as U,i as o,w as s,a1 as q,a2 as z,l as i,j as I,k as v,f as y,a3 as S,a4 as X,a5 as A,a6 as K,q as j}from"./index-53bb2135.js";const D={class:"login-container"},T={class:"login-box"},G={class:"login-header"},H={class:"login-options"},J={class:"register-link"},M={class:"register-link"},O={__name:"Login",setup(P){const _=C(),k=E(),g=$(),d=B(),u=F(()=>{var t;return((t=k.meta)==null?void 0:t.adminLogin)||!1}),r=N({username:"",password:"",remember:!1}),w={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},f=async()=>{if(d.value)try{if(!await d.value.validate())return;(await g.loginAction(r,u.value)).success&&(u.value?_.push("/admin"):_.push("/"))}catch(t){console.error("登录失败:",t)}};return(t,e)=>{const c=S,a=X,V=A,m=K,b=j,x=z;return p(),R("div",D,[n("div",T,[n("div",G,[e[6]||(e[6]=n("h2",null,"XXX管理系统",-1)),n("p",null,U(u.value?"管理员登录":"欢迎登录"),1)]),o(x,{ref_key:"loginFormRef",ref:d,model:r,rules:w,class:"login-form",onKeyup:q(f,["enter"])},{default:s(()=>[o(a,{prop:"username"},{default:s(()=>[o(c,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),placeholder:"请输入用户名或邮箱",size:"large","prefix-icon":"UserName"},null,8,["modelValue"])]),_:1}),o(a,{prop:"password"},{default:s(()=>[o(c,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(a,null,{default:s(()=>[n("div",H,[o(V,{modelValue:r.remember,"onUpdate:modelValue":e[2]||(e[2]=l=>r.remember=l)},{default:s(()=>e[7]||(e[7]=[i("记住我")])),_:1,__:[7]},8,["modelValue"]),o(m,{type:"primary",underline:!1,onClick:e[3]||(e[3]=l=>t.$router.push("/forgot-password"))},{default:s(()=>e[8]||(e[8]=[i("忘记密码？")])),_:1,__:[8]})])]),_:1}),o(a,null,{default:s(()=>[o(b,{type:"primary",size:"large",class:"login-button",loading:I(g).loading,onClick:f},{default:s(()=>e[9]||(e[9]=[i(" 登录 ")])),_:1,__:[9]},8,["loading"])]),_:1}),u.value?y("",!0):(p(),v(a,{key:0},{default:s(()=>[n("div",J,[e[11]||(e[11]=i(" 还没有账号？ ")),o(m,{type:"primary",onClick:e[4]||(e[4]=l=>t.$router.push("/register"))},{default:s(()=>e[10]||(e[10]=[i(" 立即注册 ")])),_:1,__:[10]})])]),_:1})),u.value?(p(),v(a,{key:1},{default:s(()=>[n("div",M,[o(m,{type:"primary",onClick:e[5]||(e[5]=l=>t.$router.push("/login"))},{default:s(()=>e[12]||(e[12]=[i(" 普通用户登录 ")])),_:1,__:[12]})])]),_:1})):y("",!0)]),_:1},8,["model"])])])}}},oe=L(O,[["__scopeId","data-v-f81c4f94"]]);export{oe as default};
