import{_ as h}from"./_plugin-vue_export-helper-e4601500.js";/* empty css                *//* empty css                     *//* empty css                 */import{e as v,s as A}from"./finance-0b8ee35e.js";import{r as p,$ as b,o as x,c as S,d as E,i as t,w as a,aH as B,g as s,l as M,ar as T,E as c,a2 as V,a3 as k,q as F,a1 as C}from"./index-8dfd10b0.js";const I={class:"agent-settings-container"},N={class:"settings-content"},R={__name:"AgentSettings",setup(q){const i=p(),n=b({withdrawType:"alipay",alipayAccount:""}),_={alipayAccount:[{required:!0,message:"请输入支付宝账号",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]},l=p(!1),m=async()=>{try{await i.value.validate(),await T.confirm("请确保您的支付宝账号与实名认证信息一致，否则可能导致提现失败。确认继续设置吗？","重要提醒",{confirmButtonText:"确认设置",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!1}),l.value=!0;const e=await A({Action:"SetSettlementAccount",SettlementBank:"支付宝",SettlementAccount:n.alipayAccount});l.value=!1,e.Code===1e3?c.success(e.Msg||"设置成功"):c.error(e.Msg||"设置失败")}catch(e){l.value=!1,e!=="cancel"&&(console.error("保存提现账户失败:",e),c.error("网络错误，请稍后重试"))}},f=async()=>{try{const e=await v();e.code===1e3&&e.settlement_account_number&&(n.alipayAccount=e.settlement_account_number)}catch(e){console.error("获取提现账户信息失败:",e)}};return x(()=>{f()}),(e,o)=>{const d=V,r=k,w=F,g=C,u=B;return S(),E("div",I,[t(u,{class:"settings-card"},{header:a(()=>o[1]||(o[1]=[s("div",{class:"card-header"},[s("h3",null,"提现设置"),s("p",null,"管理您的提现账户设置")],-1)])),default:a(()=>[s("div",N,[t(u,{class:"withdraw-account-card",shadow:"never"},{header:a(()=>o[2]||(o[2]=[s("h4",null,"提现账户设置",-1)])),default:a(()=>[t(g,{ref_key:"withdrawFormRef",ref:i,model:n,rules:_,"label-width":"120px",class:"withdraw-form"},{default:a(()=>[t(r,{label:"提现方式",prop:"withdrawType"},{default:a(()=>[t(d,{value:"支付宝",disabled:"",style:{width:"300px"}})]),_:1}),t(r,{label:"支付宝账号",prop:"alipayAccount"},{default:a(()=>[t(d,{modelValue:n.alipayAccount,"onUpdate:modelValue":o[0]||(o[0]=y=>n.alipayAccount=y),placeholder:"请输入支付宝账号",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),t(r,null,{default:a(()=>[t(w,{type:"primary",onClick:m,loading:l.value},{default:a(()=>o[3]||(o[3]=[M(" 保存提现账户 ")])),_:1,__:[3]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1})])}}},j=h(R,[["__scopeId","data-v-5d03cdb1"]]);export{j as default};
