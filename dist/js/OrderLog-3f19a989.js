import{_ as L}from"./_plugin-vue_export-helper-f918498f.js";/* empty css                  *//* empty css                *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                     *//* empty css                       *//* empty css               */import{r as I,$ as V,o as R,c as D,d as j,i as e,w as l,E as b,aI as A,g as c,j as E,Q,l as _,aQ as $,aS as q,k as J,D as Y,a2 as W,a3 as X,aJ as Z,aU as G,aV as K,az as ee,aW as te,p as ae,q as le,a1 as oe,aX as ne,t as re,aY as se,aZ as pe,b0 as de}from"./index-77fd0c89.js";import{c as ie}from"./finance-a7731777.js";const ue={class:"order-log-page"},me={class:"search-area"},ce={class:"pagination-wrapper"},_e={__name:"OrderLog",setup(fe){const f=I(!1),u=I([]),a=V({screenId:"",screenIp:"",screenOrderNumber:"",screenType:"",startTime:"",endTime:""}),n=V({page:1,size:20,total:0}),m=async()=>{if(a.startTime&&a.endTime&&new Date(a.startTime)>new Date(a.endTime)){b.warning("开始时间不能大于结束时间");return}f.value=!0;try{const r={screenId:a.screenId||"",screenIp:a.screenIp||"",screenOrderNumber:a.screenOrderNumber||"",screenType:a.screenType||"",screenStartTime:a.startTime||"",screenEndTime:a.endTime||"",page:n.page,pageSize:n.size},t=await ie(r);t.Code===1e3?(u.value=t.List||[],n.total=t.RowCount||0):(b.error(t.Msg||"获取订单日志失败"),u.value=[],n.total=0)}catch(r){console.error("获取订单日志失败:",r),b.error("获取订单日志失败"),u.value=[],n.total=0}finally{f.value=!1}},z=()=>{n.page=1,m()},C=()=>{a.screenId="",a.screenIp="",a.screenOrderNumber="",a.screenType="",a.startTime="",a.endTime="",n.page=1,u.value=[],n.total=0},M=r=>{n.size=r,n.page=1,m()},x=r=>{n.page=r,m()},O=r=>({购买:"success",续费:"warning",切换:"info",暂停:"warning",退订:"danger",过期:"danger",冻结:"danger"})[r]||"info",N=r=>{const t=parseFloat(r||0);return t>0?"success":t<0?"danger":"info"},S=r=>{const t=parseFloat(r||0);return t>0?`+${t.toFixed(2)}`:t<0?t.toFixed(2):"0.00"};return R(()=>{m()}),(r,t)=>{const g=W,p=X,d=Z,i=G,U=K,w=ee,v=te,y=ae,h=le,k=oe,s=ne,T=re,H=se,F=pe,P=A,B=de;return D(),j("div",ue,[e(P,{class:"page-card"},{header:l(()=>t[8]||(t[8]=[c("div",{class:"card-header"},[c("span",null,"订单日志")],-1)])),default:l(()=>[c("div",me,[e(k,{model:a,"label-width":"80px"},{default:l(()=>[e(w,{gutter:20},{default:l(()=>[e(d,{span:6},{default:l(()=>[e(p,{label:"节点ID"},{default:l(()=>[e(g,{modelValue:a.screenId,"onUpdate:modelValue":t[0]||(t[0]=o=>a.screenId=o),placeholder:"请输入节点ID",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:6},{default:l(()=>[e(p,{label:"节点IP"},{default:l(()=>[e(g,{modelValue:a.screenIp,"onUpdate:modelValue":t[1]||(t[1]=o=>a.screenIp=o),placeholder:"请输入节点IP地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:6},{default:l(()=>[e(p,{label:"订单号"},{default:l(()=>[e(g,{modelValue:a.screenOrderNumber,"onUpdate:modelValue":t[2]||(t[2]=o=>a.screenOrderNumber=o),placeholder:"请输入关联订单号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:6},{default:l(()=>[e(p,{label:"类型"},{default:l(()=>[e(U,{modelValue:a.screenType,"onUpdate:modelValue":t[3]||(t[3]=o=>a.screenType=o),placeholder:"请选择类型",clearable:"",style:{width:"100%"}},{default:l(()=>[e(i,{label:"购买",value:"购买"}),e(i,{label:"续费",value:"续费"}),e(i,{label:"切换",value:"切换"}),e(i,{label:"暂停",value:"暂停"}),e(i,{label:"退订",value:"退订"}),e(i,{label:"过期",value:"过期"}),e(i,{label:"冻结",value:"冻结"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{gutter:20},{default:l(()=>[e(d,{span:6},{default:l(()=>[e(p,{label:"开始时间"},{default:l(()=>[e(v,{modelValue:a.startTime,"onUpdate:modelValue":t[4]||(t[4]=o=>a.startTime=o),type:"datetime",placeholder:"选择开始时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:6},{default:l(()=>[e(p,{label:"结束时间"},{default:l(()=>[e(v,{modelValue:a.endTime,"onUpdate:modelValue":t[5]||(t[5]=o=>a.endTime=o),type:"datetime",placeholder:"选择结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(p,null,{default:l(()=>[e(h,{type:"primary",onClick:z},{default:l(()=>[e(y,null,{default:l(()=>[e(E(Q))]),_:1}),t[9]||(t[9]=_(" 搜索 "))]),_:1,__:[9]}),e(h,{onClick:C},{default:l(()=>[e(y,null,{default:l(()=>[e(E($))]),_:1}),t[10]||(t[10]=_(" 重置 "))]),_:1,__:[10]})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),q((D(),J(H,{data:u.value,stripe:"",style:{width:"100%"},"empty-text":"暂无数据"},{default:l(()=>[e(s,{prop:"id",label:"订单ID",width:"120","show-overflow-tooltip":""}),e(s,{prop:"type",label:"类型",width:"80",align:"center"},{default:l(({row:o})=>[e(T,{type:O(o.type),size:"small"},{default:l(()=>[_(Y(o.type),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"describe",label:"描述","min-width":"120","show-overflow-tooltip":""}),e(s,{prop:"time",label:"操作时间",width:"160","show-overflow-tooltip":""}),e(s,{prop:"sold_id",label:"节点ID",width:"120","show-overflow-tooltip":""}),e(s,{prop:"ip",label:"IP地址",width:"130","show-overflow-tooltip":""}),e(s,{prop:"game",label:"游戏","min-width":"100","show-overflow-tooltip":""}),e(s,{prop:"area",label:"区域",width:"100","show-overflow-tooltip":""}),e(s,{prop:"start_time",label:"开始时间",width:"160","show-overflow-tooltip":""}),e(s,{prop:"end_time",label:"结束时间",width:"160","show-overflow-tooltip":""}),e(s,{prop:"amount",label:"金额变动",width:"120",align:"center"},{default:l(({row:o})=>[e(T,{type:N(o.amount),size:"small"},{default:l(()=>[_(Y(S(o.amount)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[B,f.value]]),c("div",ce,[e(F,{"current-page":n.page,"onUpdate:currentPage":t[6]||(t[6]=o=>n.page=o),"page-size":n.size,"onUpdate:pageSize":t[7]||(t[7]=o=>n.size=o),"page-sizes":[10,20,50,100],total:n.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:M,onCurrentChange:x},null,8,["current-page","page-size","total"])])]),_:1})])}}},Me=L(_e,[["__scopeId","data-v-677cb8e6"]]);export{Me as default};
